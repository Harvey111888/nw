import{d as g,A as u,v,u as w,b as n,f as e,e as b,w as x,F as y,y as k,D as V,B as p,C as m,r as B,o as i,h as C,i as _,l as L,m as S,I as U}from"./index-e31bf4cb.js";const q={class:"auth-page"},A={class:"container page"},D={class:"row"},E={class:"col-md-6 offset-md-3 col-xs-12"},F=e("h1",{class:"text-xs-center"}," 登錄 ",-1),N={class:"text-xs-center"},M={class:"error-messages"},P=["onSubmit"],R={class:"form-group","aria-required":"true"},T={class:"form-group"},I=["disabled"],G=g({__name:"Login",setup(j){const c=u(null),s=v({email:"",password:""}),{updateUser:f}=w(),a=u(),h=async()=>{var l,t;if(a.value={},!!((l=c.value)!=null&&l.checkValidity()))try{const o=await L.users.login({user:s});f(o.data.user),await S("global-feed")}catch(o){if(U(o)){a.value=(t=o.error)==null?void 0:t.errors;return}console.error(o)}};return(l,t)=>{const o=B("AppLink");return i(),n("div",q,[e("div",A,[e("div",D,[e("div",E,[F,e("p",N,[b(o,{name:"register"},{default:x(()=>[C(" 還沒有注冊? ")]),_:1})]),e("ul",M,[(i(!0),n(y,null,k(a.value,(r,d)=>(i(),n("li",{key:d},_(d)+" "+_(r?r[0]:""),1))),128))]),e("form",{ref_key:"formRef",ref:c,onSubmit:V(h,["prevent"])},[e("fieldset",R,[p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.email=r),class:"form-control form-control-lg",type:"email",required:"",placeholder:"Email"},null,512),[[m,s.email]])]),e("fieldset",T,[p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.password=r),class:"form-control form-control-lg",type:"password",required:"",placeholder:"Password"},null,512),[[m,s.password]])]),e("button",{class:"btn btn-lg btn-primary pull-xs-right",disabled:!s.email||!s.password,type:"submit"}," 注冊 ",8,I)],40,P)])])])])}}});export{G as default};

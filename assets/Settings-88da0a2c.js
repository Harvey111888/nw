import{d as f,v as g,u as b,E as _,m as u,c as h,b as w,f as t,D as x,B as n,C as i,g as y,o as U,l as v}from"./index-e31bf4cb.js";const S={class:"settings-page"},V={class:"container page"},B={class:"row"},C={class:"col-md-6 offset-md-3 col-xs-12"},D=t("h1",{class:"text-xs-center"}," 你的個人設定 ",-1),k=["onSubmit"],E={class:"form-group"},M={class:"form-group"},L={class:"form-group"},N={class:"form-group"},P={class:"form-group"},j=["disabled"],z=t("hr",null,null,-1),O=f({__name:"Settings",setup(A){const e=g({}),r=b(),m=async()=>{const l=Object.entries(e).reduce((s,[a,d])=>d===null?s:{...s,[a]:d},{}),o=await v.user.updateCurrentUser({user:l}).then(s=>s.data.user);r.updateUser(o),await u("profile",{username:o.username})},c=async()=>{r.updateUser(null),await u("global-feed")};_(async()=>{var l,o,s,a;if(!r.isAuthorized)return await u("login");e.image=(l=r.user)==null?void 0:l.image,e.username=(o=r.user)==null?void 0:o.username,e.bio=(s=r.user)==null?void 0:s.bio,e.email=(a=r.user)==null?void 0:a.email});const p=h(()=>{var l,o,s,a;return e.image===((l=r.user)==null?void 0:l.image)&&e.username===((o=r.user)==null?void 0:o.username)&&e.bio===((s=r.user)==null?void 0:s.bio)&&e.email===((a=r.user)==null?void 0:a.email)&&!e.password});return(l,o)=>(U(),w("div",S,[t("div",V,[t("div",B,[t("div",C,[D,t("form",{onSubmit:x(m,["prevent"])},[t("fieldset",null,[t("fieldset",E,[n(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.image=s),type:"text",class:"form-control",placeholder:"URL of profile picture"},null,512),[[i,e.image]])]),t("fieldset",M,[n(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.username=s),type:"text",class:"form-control form-control-lg",placeholder:"Your name"},null,512),[[i,e.username]])]),t("fieldset",L,[n(t("textarea",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.bio=s),class:"form-control form-control-lg",rows:8,placeholder:"Short bio about you"},null,512),[[i,e.bio]])]),t("fieldset",N,[n(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.email=s),type:"email",class:"form-control form-control-lg",placeholder:"Email"},null,512),[[i,e.email]])]),t("fieldset",P,[n(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.password=s),type:"password",class:"form-control form-control-lg",placeholder:"New Password"},null,512),[[i,e.password]])]),t("button",{class:"btn btn-lg btn-primary pull-xs-right",disabled:y(p),type:"submit"}," 更新設定 ",8,j)])],40,k),z,t("button",{class:"btn btn-outline-danger",onClick:c}," 點擊退出登錄. ")])])])]))}});export{O as default};

import{d as y,c as b,v as w,A as x,E as L,b as c,f as s,D as m,B as r,C as n,G as A,F as k,y as T,l as d,o as u,h as V,i as C,z as B,H as E}from"./index-e31bf4cb.js";const S={class:"editor-page"},U={class:"container page"},D={class:"row"},K={class:"col-md-10 offset-md-1 col-xs-12"},M=["onSubmit"],F={class:"form-group"},N={class:"form-group"},R={class:"form-group"},W={class:"form-group"},z=["onKeypress"],G={class:"tag-list"},H=["onClick"],$=["disabled"],J=y({__name:"EditArticle",setup(j){const f=B(),g=E(),l=b(()=>f.params.slug),t=w({title:"",description:"",body:"",tagList:[]}),i=x(""),p=()=>{t.tagList.push(i.value.trim()),i.value=""},_=a=>{t.tagList=t.tagList.filter(e=>e!==a)};async function h(a){const e=await d.articles.getArticle(a).then(o=>o.data.article);t.title=e.title,t.description=e.description,t.body=e.body,t.tagList=e.tagList}L(()=>{l.value&&h(l.value)});const v=async()=>{let a;return l.value?a=await d.articles.updateArticle(l.value,{article:t}).then(e=>e.data.article):a=await d.articles.createArticle({article:t}).then(e=>e.data.article),g.push({name:"article",params:{slug:a.slug}})};return(a,e)=>(u(),c("div",S,[s("div",U,[s("div",D,[s("div",K,[s("form",{onSubmit:m(v,["prevent"])},[s("fieldset",F,[r(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.title=o),type:"text",class:"form-control form-control-lg",placeholder:"Article Title"},null,512),[[n,t.title]])]),s("fieldset",N,[r(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.description=o),type:"text",class:"form-control form-control-lg",placeholder:"What's this article about?"},null,512),[[n,t.description]])]),s("fieldset",R,[r(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.body=o),rows:8,class:"form-control",placeholder:"Write your article (in markdown)"},null,512),[[n,t.body]])]),s("fieldset",W,[r(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>i.value=o),type:"text",class:"form-control",placeholder:"Enter tags",onChange:p,onKeypress:A(m(p,["prevent"]),["enter"])},null,40,z),[[n,i.value]]),s("div",G,[(u(!0),c(k,null,T(t.tagList,o=>(u(),c("span",{key:o,class:"tag-default tag-pill"},[s("i",{class:"ion-close-round",onClick:q=>_(o)},null,8,H),V(" "+C(o),1)]))),128))])]),s("button",{class:"btn btn-lg pull-xs-right btn-primary",type:"submit",disabled:!(t.title&&t.description&&t.body)}," 發表文章 ",8,$)],40,M)])])])]))}});export{J as default};
